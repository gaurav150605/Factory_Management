<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-user-edit me-2"></i>Edit Employee</h2>
    <a href="/employees" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-1"></i>Back to Employees
    </a>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Edit Employee Information</h5>
            </div>
            <div class="card-body">
                <form method="POST" action="/employees/edit/{{employee._id}}" class="needs-validation form-with-loading" novalidate>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="name" class="form-label">Full Name *</label>
                            <input type="text" class="form-control" id="name" name="name" 
                                   value="{{employee.name}}" required>
                            <div class="invalid-feedback">
                                Please enter employee name.
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="role" class="form-label">Role/Position *</label>
                            <select class="form-select" id="role" name="role" required>
                                <option value="">Select role</option>
                                <option value="Manager" {{#if (eq employee.role "Manager")}}selected{{/if}}>Manager</option>
                                <option value="Production Supervisor" {{#if (eq employee.role "Production Supervisor")}}selected{{/if}}>Production Supervisor</option>
                                <option value="Quality Controller" {{#if (eq employee.role "Quality Controller")}}selected{{/if}}>Quality Controller</option>
                                <option value="Sales Executive" {{#if (eq employee.role "Sales Executive")}}selected{{/if}}>Sales Executive</option>
                                <option value="Accountant" {{#if (eq employee.role "Accountant")}}selected{{/if}}>Accountant</option>
                                <option value="Worker" {{#if (eq employee.role "Worker")}}selected{{/if}}>Worker</option>
                                <option value="Helper" {{#if (eq employee.role "Helper")}}selected{{/if}}>Helper</option>
                                <option value="Driver" {{#if (eq employee.role "Driver")}}selected{{/if}}>Driver</option>
                                <option value="Security" {{#if (eq employee.role "Security")}}selected{{/if}}>Security</option>
                            </select>
                            <div class="invalid-feedback">
                                Please select a role.
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="phone" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="phone" name="phone" 
                                   pattern="[0-9]{10}" value="{{employee.phone}}">
                            <div class="invalid-feedback">
                                Please enter a valid 10-digit phone number.
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="basicSalary" class="form-label">Basic Salary (₹) *</label>
                            <div class="input-group">
                                <span class="input-group-text">₹</span>
                                <input type="number" class="form-control currency-input" id="basicSalary" name="basicSalary" 
                                       step="0.01" min="0" value="{{employee.basicSalary}}" required>
                            </div>
                            <div class="invalid-feedback">
                                Please enter a valid salary amount.
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="joiningDate" class="form-label">Joining Date *</label>
                            <input type="date" class="form-control" id="joiningDate" name="joiningDate" 
                                   value="{{formatDate employee.joiningDate 'YYYY-MM-DD'}}" required>
                            <div class="invalid-feedback">
                                Please select joining date.
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="address" class="form-label">Address</label>
                            <textarea class="form-control" id="address" name="address" rows="3" 
                                      placeholder="Employee address...">{{employee.address}}</textarea>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="/employees" class="btn btn-secondary me-md-2">Cancel</a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-1"></i>Update Employee
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Employee Details</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Employee ID:</strong>
                    <span class="text-muted">{{employee._id}}</span>
                </div>
                <div class="mb-3">
                    <strong>Created:</strong>
                    <span class="text-muted">{{formatDate employee.createdAt}}</span>
                </div>
                <div class="mb-3">
                    <strong>Last Updated:</strong>
                    <span class="text-muted">{{formatDate employee.updatedAt}}</span>
                </div>
                <div class="mb-3">
                    <strong>Status:</strong>
                    {{#if employee.isActive}}
                        <span class="badge bg-success">Active</span>
                    {{else}}
                        <span class="badge bg-danger">Inactive</span>
                    {{/if}}
                </div>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h5 class="mb-0">Quick Actions</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="/employees/attendance/{{employee._id}}" class="btn btn-outline-info">
                        <i class="fas fa-calendar me-1"></i>View Attendance
                    </a>
                    <a href="/employees/advance/{{employee._id}}" class="btn btn-outline-primary">
                        <i class="fas fa-hand-holding-usd me-1"></i>Manage Advances
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
